const VOR_CELLDRAW_BOUNDED=1,VOR_CELLDRAW_CENTER=2,VOR_CELLDRAW_SITE=3;(function(){function a(Q,R){for(var S=Q[0],T=Q[1],U=!1,V=0,W=R.length-1;V<R.length;W=V++){var X=R[V][0],Y=R[V][1],Z=R[W][0],$=R[W][1];Y>T!=$>T&&S<(Z-X)*(T-Y)/($-Y)+X&&(U=!U)}return U}function d(){A=[];for(var R,Q=0;Q<v.cells.length;Q++){R=[];for(var S=0;S<v.cells[Q].halfedges.length;S++)R.push([v.cells[Q].halfedges[S].getStartpoint().x,v.cells[Q].halfedges[S].getStartpoint().y]);A.push(R)}}function g(Q,R){for(var S=0;S<C;S++){var T,U=round(random(0,Q)),V=round(random(0,R)),W=500,X=0;if(0<D)do{T=!1,U=round(random(0,Q)),V=round(random(0,R));for(var Y=0;Y<z.length;Y++)h(U,V,z[Y].x,z[Y].y)<D&&(T=!0);X++}while(!0==T&&X<=W);z.push({x:U,y:V}),F.push([U,V,color(random(0,255),random(0,255),random(0,255))]),X>=W&&console.log("Warning: setRandoms tries limit reached: minimum distance("+D+") not ensured")}}function h(Q,R,S,T){return sqrt(sq(Q-S)+sq(R-T))}function k(Q){let R=[];for(let S=0;S<Q.length;S++)-1==R.indexOf(Q[S])&&R.push(Q[S]);return R}function l(Q,R,S,T,U,V,W){strokeWeight(G),stroke(H);let X=Number.MAX_VALUE,Y=Number.MAX_VALUE;for(var Z=0;Z<W[S].length;Z++)W[S][Z][0]<X&&(X=W[S][Z][0]),W[S][Z][1]<Y&&(Y=W[S][Z][1]);beginShape();for(var Z=0;Z<W[S].length;Z++)vertex(W[S][Z][0]-X+Q,W[S][Z][1]-Y+R);endShape(CLOSE),K&&(strokeWeight(I),stroke(J),point(T-X+Q,U-Y+R)),pop()}function m(Q,R,S,T,U,V,W){strokeWeight(G),stroke(H);let X=Number.MAX_VALUE,Y=Number.MAX_VALUE,Z=0,$=0;for(var _=0;_<W[S].length;_++)W[S][_][0]<X&&(X=W[S][_][0]),W[S][_][1]<Y&&(Y=W[S][_][1]),W[S][_][0]>Z&&(Z=W[S][_][0]),W[S][_][1]>$&&($=W[S][_][1]);let aa=Z-X,ba=$-Y;beginShape();for(var _=0;_<W[S].length;_++)vertex(W[S][_][0]-X+Q-aa/2,W[S][_][1]-Y+R-ba/2);endShape(CLOSE),K&&(strokeWeight(I),stroke(J),point(T-X+Q-aa/2,U-Y+R-ba/2)),pop()}function o(Q,R,S,T,U,V,W){strokeWeight(G),stroke(H);let X=Number.MAX_VALUE,Y=Number.MAX_VALUE;for(var Z=0;Z<W[S].length;Z++)W[S][Z][0]<X&&(X=W[S][Z][0]),W[S][Z][1]<Y&&(Y=W[S][Z][1]);beginShape();for(var Z=0;Z<W[S].length;Z++)vertex(W[S][Z][0]-X+Q-(T-X),W[S][Z][1]-Y+R-(U-Y));endShape(CLOSE),K&&(strokeWeight(I),stroke(J),point(T-X+Q-(T-X),U-Y+R-(U-Y))),pop()}function p(Q){for(var R=0;R<F.length;R++)F[R][0]==v.cells[Q].site.x&&F[R][1]==v.cells[Q].site.y&&fill(F[R][2])}function q(){for(var S,Q=[],R=0;R<v.cells.length;R++){S=[];for(var T=0;T<v.cells[R].halfedges.length;T++){const X=v.cells[R].halfedges[T];if(!O&&(0==round(X.getStartpoint().x)&&0==round(X.getEndpoint().x)||0==round(X.getStartpoint().y)&&0==round(X.getEndpoint().y)||round(X.getStartpoint().x)==t&&round(X.getEndpoint().x)==t||round(X.getStartpoint().y)==u&&round(X.getEndpoint().y)==u)){S.push([X.getStartpoint().x,X.getStartpoint().y]);continue}for(var U=!1,V=0,W=0;W<Q.length;W++)if(Q[W][0].getEndpoint()===X.getStartpoint()&&Q[W][0].getStartpoint()===X.getEndpoint()){U=!0,V=W;break}if(U)for(var W=Q[V][1].length-1;0<W;W--)S.push(Q[V][1][W]);else r(S,X,Q)}P.push(S)}}function r(Q,R,S){memEdge=[];const T=R.getEndpoint().x-R.getStartpoint().x,U=R.getEndpoint().y-R.getStartpoint().y,V=createVector(T,U),W=V.copy();W.normalize();const X=V.mag(),Y=W.copy();Y.rotate(HALF_PI);let Z=createVector(R.getStartpoint().x,R.getStartpoint().y),$=Z.copy(),_=0;Q.push([Z.x,Z.y]),memEdge.push([Z.x,Z.y]);for(var aa=random(M,L+1);aa<X;)$=p5.Vector.add(Z,p5.Vector.mult(W,aa)),_=(random(0,201)-100)/100,_*=N,$.add(p5.Vector.mult(Y,_)),Q.push([$.x,$.y]),memEdge.push([$.x,$.y]),aa+=random(M,L+1);memEdge.push([R.getEndpoint().x,R.getEndpoint().y]),S.push([R,memEdge])}var t,u,v,z=[],A=[],B=!1,C,D=0,E=new Voronoi,F=[],G=1,H=0,I=3,J=0,K=!0,L=20,M=5,N=3,O=!1,P=[];p5.prototype.voronoiCellStrokeWeight=function(Q){0<=Q&&(G=Q)},p5.prototype.voronoiSiteStrokeWeight=function(Q){0<=Q&&(I=Q)},p5.prototype.voronoiCellStroke=function(Q){H=Q},p5.prototype.voronoiSiteStroke=function(Q){J=Q},p5.prototype.voronoiSiteFlag=function(Q){K=Q},p5.prototype.voronoiRndSites=function(Q,R){C=Q,R!==void 0&&(D=R)},p5.prototype.voronoiRndMinDist=function(Q){D=Q},p5.prototype.voronoiSites=function(Q){for(var R=0;R<Q.length;R++)z.push({x:Q[R][0],y:Q[R][1]}),void 0===Q[R][2]?F.push([Q[R][0],Q[R][1],color(random(0,255),random(0,255),random(0,255))]):F.push([Q[R][0],Q[R][1],Q[R][2]])},p5.prototype.voronoiSite=function(Q,R,S){z.push({x:Q,y:R}),S===void 0?F.push([Q,R,color(random(0,255),random(0,255),random(0,255))]):F.push([Q,R,S])},p5.prototype.voronoiRemoveSite=function(Q,R){if(R===void 0)z.splice(Q,1);else for(var S=0;S<z.length;S++)if(z[S].x==Q&&z[S].y==R)return void z.splice(S,1)},p5.prototype.voronoiClearSites=function(){F=[],z=[]},p5.prototype.voronoiGetSite=function(Q,R,S=!1){var T=A;S&&(0===P.length?console.log("voronoiGetSite: Jitter was not generated, using normal diagram"):T=P);for(var U=0;U<T.length;U++)if(a([Q,R],T[U]))return U};p5.prototype.voronoi=function(Q,R,S=!1){E.recycle(v),B&&z.splice(z.length-C,C),t=Q,u=R,g(Q,R),v=E.compute(z,{xl:0,xr:Q,yt:0,yb:R}),d(),P=[],S&&q(),B||(B=!0)},p5.prototype.voronoiGetDiagram=function(){return v},p5.prototype.voronoiGetCells=function(){return A},p5.prototype.voronoiNeighbors=function(Q){if(!(Q>=v.cells.length||void 0===Q)){for(var R=[],S=0;S<v.cells[Q].halfedges.length;S++)null!==v.cells[Q].halfedges[S].edge.rSite&&R.push(v.cells[Q].halfedges[S].edge.rSite.voronoiId),R.push(v.cells[Q].halfedges[S].edge.lSite.voronoiId);for(var T=k(R),S=0;S<T.length;S++)if(T[S]==Q){T.splice(S,1);break}return T}},p5.prototype.voronoiDrawCell=function(Q,R,S,T,U=!1,V=!1){if(!(S>=v.cells.length||void 0===S)){var W=v.cells[S].halfedges,X=v.cells[S].site.x,Y=v.cells[S].site.y;push(),p(S),U||noFill();var Z=A;V&&(0===P.length?console.log("voronoiDrawCell: Jitter was not generated, using normal diagram"):Z=P),T==VOR_CELLDRAW_BOUNDED?l(Q,R,S,X,Y,V,Z):T==VOR_CELLDRAW_CENTER?m(Q,R,S,X,Y,V,Z):T==VOR_CELLDRAW_SITE&&o(Q,R,S,X,Y,V,Z)}},p5.prototype.voronoiDraw=function(Q,R,S=!0,T=!1){var U=A;T&&(0===P.length?console.log("voronoiDraw: Jitter was not generated, using normal diagram"):U=P),push(),S||noFill();for(var V=0;V<U.length;V++){strokeWeight(G),stroke(H),S&&p(V),beginShape();for(var W=0;W<U[V].length;W++)vertex(U[V][W][0]+Q,U[V][W][1]+R);if(endShape(CLOSE),K){strokeWeight(I),stroke(J);let X=Q+v.cells[V].site.x,Y=R+v.cells[V].site.y;point(X,Y)}}pop()},p5.prototype.voronoiJitterStepMax=function(Q){0<=Q&&(L=Q)},p5.prototype.voronoiJitterStepMin=function(Q){0<=Q&&(M=Q)},p5.prototype.voronoiJitterFactor=function(Q){N=Q},p5.prototype.voronoiJitterBorder=function(Q){O=Q},p5.prototype.voronoiGetCellsJitter=function(){return 0===P.length?(console.log("voronoiGetCellsJitter: Jitter was not generated, using normal diagram"),A):P}})();