const VOR_CELLDRAW_BOUNDED=1,VOR_CELLDRAW_CENTER=2,VOR_CELLDRAW_SITE=3;!function(){var o,t,e,r,n=[],i=[],p=!1,l=0,a=new Voronoi,s=[],g=1,u=0,d=3,c=0,h=!0,f=20,v=5,m=3,y=!1,S=[];function E(o,t){for(var e=o[0],r=o[1],n=!1,i=0,p=t.length-1;i<t.length;p=i++){var l=t[i][0],a=t[i][1],s=t[p][0],g=t[p][1];a>r!=g>r&&e<(s-l)*(r-a)/(g-a)+l&&(n=!n)}return n}function x(o){let t=voronoiGetColor(o);fill(t)}function k(o,t,e){memEdge=[];const r=t.getEndpoint().x-t.getStartpoint().x,n=t.getEndpoint().y-t.getStartpoint().y,i=createVector(r,n),p=i.copy();p.normalize();const l=i.mag(),a=p.copy();a.rotate(HALF_PI);let s=createVector(t.getStartpoint().x,t.getStartpoint().y),g=s.copy(),u=0;o.push([s.x,s.y]),memEdge.push([s.x,s.y]);for(var d=random(v,f+1);d<l;)g=p5.Vector.add(s,p5.Vector.mult(p,d)),u=(random(0,201)-100)/100,u*=m,g.add(p5.Vector.mult(a,u)),o.push([g.x,g.y]),memEdge.push([g.x,g.y]),d+=random(v,f+1);memEdge.push([t.getEndpoint().x,t.getEndpoint().y]),e.push([t,memEdge])}p5.prototype.voronoiCellStrokeWeight=function(o){o>=0&&(g=o)},p5.prototype.voronoiSiteStrokeWeight=function(o){o>=0&&(d=o)},p5.prototype.voronoiCellStroke=function(o){u=o},p5.prototype.voronoiSiteStroke=function(o){c=o},p5.prototype.voronoiSiteFlag=function(o){h=o},p5.prototype.voronoiRndSites=function(o,t){r=o,void 0!==t&&(l=t)},p5.prototype.voronoiRndMinDist=function(o){l=o},p5.prototype.voronoiSites=function(o){for(var t=0;t<o.length;t++)n.push({x:o[t][0],y:o[t][1]}),void 0!==o[t][2]?s.push([o[t][0],o[t][1],o[t][2]]):s.push([o[t][0],o[t][1],color(random(0,255),random(0,255),random(0,255))])},p5.prototype.voronoiSite=function(o,t,e){n.push({x:o,y:t}),void 0!==e?s.push([o,t,e]):s.push([o,t,color(random(0,255),random(0,255),random(0,255))])},p5.prototype.voronoiRemoveSite=function(o,t){if(void 0===t)n.splice(o,1);else for(var e=0;e<n.length;e++)if(n[e].x==o&&n[e].y==t)return void n.splice(e,1)},p5.prototype.voronoiClearSites=function(){s=[],n=[]},p5.prototype.voronoiGetSite=function(o,t,e=!1){var r=i;e&&(0!==S.length?r=S:console.log("voronoiGetSite: Jitter was not generated, using normal diagram"));for(var n=0;n<r.length;n++)if(E([o,t],r[n]))return n},p5.prototype.voronoi=function(g,u,d=!1){a.recycle(e),p&&n.splice(n.length-r,r),o=g,t=u,function(o,t){for(var e=0;e<r;e++){var i,p=round(random(0,o)),a=round(random(0,t)),g=0;if(l>0)do{i=!1,p=round(random(0,o)),a=round(random(0,t));for(var u=0;u<n.length;u++)d=p,c=a,h=n[u].x,f=n[u].y,sqrt(sq(d-h)+sq(c-f))<l&&(i=!0);g++}while(1==i&&g<=500);n.push({x:p,y:a}),s.push([p,a,color(random(0,255),random(0,255),random(0,255))]),g>=500&&console.log("Warning: setRandoms tries limit reached: minimum distance("+l+") not ensured")}var d,c,h,f}(g,u),e=a.compute(n,{xl:0,xr:g,yt:0,yb:u}),function(){i=[];for(var o=0;o<e.cells.length;o++){for(var t=[],r=0;r<e.cells[o].halfedges.length;r++)t.push([e.cells[o].halfedges[r].getStartpoint().x,e.cells[o].halfedges[r].getStartpoint().y]);i.push(t)}}(),S=[],d&&function(){for(var r=[],n=0;n<e.cells.length;n++){for(var i=[],p=0;p<e.cells[n].halfedges.length;p++){const g=e.cells[n].halfedges[p];if(y||!(0==round(g.getStartpoint().x)&&0==round(g.getEndpoint().x)||0==round(g.getStartpoint().y)&&0==round(g.getEndpoint().y)||round(g.getStartpoint().x)==o&&round(g.getEndpoint().x)==o||round(g.getStartpoint().y)==t&&round(g.getEndpoint().y)==t)){for(var l=!1,a=0,s=0;s<r.length;s++)if(r[s][0].getEndpoint()===g.getStartpoint()&&r[s][0].getStartpoint()===g.getEndpoint()){l=!0,a=s;break}if(l)for(var s=r[a][1].length-1;s>0;s--)i.push(r[a][1][s]);else k(i,g,r)}else i.push([g.getStartpoint().x,g.getStartpoint().y])}S.push(i)}}(),p||(p=!0)},p5.prototype.voronoiGetDiagram=function(){return e},p5.prototype.voronoiGetCells=function(){return i},p5.prototype.voronoiNeighbors=function(o){if(!(o>=e.cells.length||void 0===o)){for(var t=[],r=0;r<e.cells[o].halfedges.length;r++)null!==e.cells[o].halfedges[r].edge.rSite&&t.push(e.cells[o].halfedges[r].edge.rSite.voronoiId),t.push(e.cells[o].halfedges[r].edge.lSite.voronoiId);var n=function(o){let t=[];for(let e=0;e<o.length;e++)-1==t.indexOf(o[e])&&t.push(o[e]);return t}(t);for(r=0;r<n.length;r++)if(n[r]==o){n.splice(r,1);break}return n}},p5.prototype.voronoiDrawCell=function(o,t,r,n,p=!1,l=!1){if(!(r>=e.cells.length||void 0===r)){e.cells[r].halfedges;var a=e.cells[r].site.x,s=e.cells[r].site.y;push(),x(r),p||noFill();var f=i;l&&(0!==S.length?f=S:console.log("voronoiDrawCell: Jitter was not generated, using normal diagram")),1==n?function(o,t,e,r,n,i,p){strokeWeight(g),stroke(u);let l=Number.MAX_VALUE,a=Number.MAX_VALUE;for(var s=0;s<p[e].length;s++)p[e][s][0]<l&&(l=p[e][s][0]),p[e][s][1]<a&&(a=p[e][s][1]);beginShape();for(var s=0;s<p[e].length;s++)vertex(p[e][s][0]-l+o,p[e][s][1]-a+t);endShape(CLOSE),h&&(strokeWeight(d),stroke(c),point(r-l+o,n-a+t));pop()}(o,t,r,a,s,0,f):2==n?function(o,t,e,r,n,i,p){strokeWeight(g),stroke(u);let l=Number.MAX_VALUE,a=Number.MAX_VALUE,s=0,f=0;for(var v=0;v<p[e].length;v++)p[e][v][0]<l&&(l=p[e][v][0]),p[e][v][1]<a&&(a=p[e][v][1]),p[e][v][0]>s&&(s=p[e][v][0]),p[e][v][1]>f&&(f=p[e][v][1]);let m=s-l,y=f-a;beginShape();for(var v=0;v<p[e].length;v++)vertex(p[e][v][0]-l+o-m/2,p[e][v][1]-a+t-y/2);endShape(CLOSE),h&&(strokeWeight(d),stroke(c),point(r-l+o-m/2,n-a+t-y/2));pop()}(o,t,r,a,s,0,f):3==n&&function(o,t,e,r,n,i,p){strokeWeight(g),stroke(u);let l=Number.MAX_VALUE,a=Number.MAX_VALUE;for(var s=0;s<p[e].length;s++)p[e][s][0]<l&&(l=p[e][s][0]),p[e][s][1]<a&&(a=p[e][s][1]);beginShape();for(var s=0;s<p[e].length;s++)vertex(p[e][s][0]-l+o-(r-l),p[e][s][1]-a+t-(n-a));endShape(CLOSE),h&&(strokeWeight(d),stroke(c),point(r-l+o-(r-l),n-a+t-(n-a)));pop()}(o,t,r,a,s,0,f)}},p5.prototype.voronoiDraw=function(o,t,r=!0,n=!1){var p=i;n&&(0!==S.length?p=S:console.log("voronoiDraw: Jitter was not generated, using normal diagram")),push(),r||noFill();for(var l=0;l<p.length;l++){strokeWeight(g),stroke(u),r&&x(l),beginShape();for(var a=0;a<p[l].length;a++)vertex(p[l][a][0]+o,p[l][a][1]+t);if(endShape(CLOSE),h){strokeWeight(d),stroke(c);let r=o+e.cells[l].site.x,n=t+e.cells[l].site.y;point(r,n)}}pop()},p5.prototype.voronoiGetColor=function(o){for(var t=0;t<s.length;t++)if(s[t][0]==e.cells[o].site.x&&s[t][1]==e.cells[o].site.y)return s[t][2]},p5.prototype.voronoiJitterStepMax=function(o){o>=0&&(f=o)},p5.prototype.voronoiJitterStepMin=function(o){o>=0&&(v=o)},p5.prototype.voronoiJitterFactor=function(o){m=o},p5.prototype.voronoiJitterBorder=function(o){y=o},p5.prototype.voronoiGetCellsJitter=function(o){return 0!==S.length?S:(console.log("voronoiGetCellsJitter: Jitter was not generated, using normal diagram"),i)}}();